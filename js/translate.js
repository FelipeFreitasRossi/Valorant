// translate.js - Sistema de InternacionalizaÃ§Ã£o para VALORANT

const translations = {
    pt: {
        // NavegaÃ§Ã£o
        home: "InÃ­cio",
        agents: "Agentes",
        arsenal: "Arsenal",
        maps: "Mapas",
        news: "NotÃ­cias",
        playFree: "Jogar GrÃ¡tis",
        
        // Hero section
        valorant: "VALORANT",
        defyLimits: "Desafie os Limites",
        playNow: "Jogar Agora",
        watchTrailer: "Ver Trailer",
        
        // Agents section
        yourAgents: "Seus Agentes",
        chooseCharacter: "Escolha Seu Personagem",
        agentDescription: "Misture seu estilo e experiÃªncia em um palco competitivo global. VocÃª tem 13 rodadas para atacar e defender seu lado usando tiros precisos e habilidades tÃ¡ticas.",
        duelists: "Duelistas",
        duelistsDesc: "Fraggers autossuficientes que sua equipe espera, atravÃ©s de habilidades e tÃ©cnicas, conseguir muitas eliminaÃ§Ãµes e buscar engajamentos primeiro.",
        controllers: "Controladores",
        controllersDesc: "Especialistas em dividir territÃ³rios perigosos para preparar sua equipe para o sucesso com controle de visÃ£o e negaÃ§Ã£o de Ã¡rea.",
        initiators: "Iniciadores",
        initiatorsDesc: "Desafie Ã¢ngulos preparando sua equipe para entrar em terreno contestado e afastar os defensores de posiÃ§Ãµes-chave.",
        sentinels: "Sentinels",
        sentinelsDesc: "Especialistas defensivos que podem trancar Ã¡reas e vigiar flancos, tanto em rodadas de ataque quanto de defesa.",
        
        // Arsenal section
        arsenalTitle: "PrecisÃ£o TÃ¡tica Encontra ForÃ§a Letal",
        arsenalDesc1: "Cada arma no VALORANT requer sua prÃ³pria estratÃ©gia e estilo de jogo. Domine os padrÃµes de recuo, entenda a economia e domine o campo de batalha com mira perfeita.",
        arsenalDesc2: "De pistolas a metralhadoras pesadas, cada arma foi meticulosamente projetada para fornecer profundidade tÃ¡tica e recompensar jogadores habilidosos.",
        weapons: "Armas",
        
        // CTA
        ctaTitle: "Pronto para Entrar na Luta?",
        ctaDesc: "Baixe o VALORANT e comece sua jornada competitiva hoje",
        getStarted: "ComeÃ§ar",
        
        // Footer
        footerDesc: "Um FPS tÃ¡tico baseado em personagens 5v5 onde tiros precisos se encontram com habilidades de agente Ãºnicas.",
        game: "Jogo",
        esports: "Esports",
        support: "Suporte",
        patchNotes: "Notas de AtualizaÃ§Ã£o",
        vct: "VCT",
        champions: "Champions",
        masters: "Masters",
        gameChangers: "Game Changers",
        helpCenter: "Central de Ajuda",
        privacyPolicy: "PolÃ­tica de Privacidade",
        termsOfService: "Termos de ServiÃ§o",
        contact: "Contato",
        
        // Selector de idioma
        portuguese: "PortuguÃªs",
        english: "InglÃªs",
        spanish: "Espanhol",
        
        // TÃ­tulo da pÃ¡gina
        pageTitle: "VALORANT - FPS TÃ¡tico"
    },
    en: {
        home: "Home",
        agents: "Agents",
        arsenal: "Arsenal",
        maps: "Maps",
        news: "News",
        playFree: "Play Free",
        valorant: "VALORANT",
        defyLimits: "Defy The Limits",
        playNow: "Play Now",
        watchTrailer: "Watch Trailer",
        yourAgents: "Your Agents",
        chooseCharacter: "Choose Your Character",
        agentDescription: "Blend your style and experience on a global, competitive stage. You have 13 rounds to attack and defend your side using sharp gunplay and tactical abilities.",
        duelists: "Duelists",
        duelistsDesc: "Self-sufficient fraggers who their team expects, through abilities and skills, to get high frags and seek out engagements first.",
        controllers: "Controllers",
        controllersDesc: "Experts in slicing up dangerous territory to set their team up for success with vision control and area denial.",
        initiators: "Initiators",
        initiatorsDesc: "Challenge angles by setting up their team to enter contested ground and push defenders away from key positions.",
        sentinels: "Sentinels",
        sentinelsDesc: "Defensive specialists who can lock down areas and watch flanks, both on attacker and defender rounds.",
        arsenalTitle: "Tactical Precision Meets Lethal Force",
        arsenalDesc1: "Every weapon in VALORANT requires its own unique strategy and playstyle. Master the recoil patterns, understand the economy, and dominate the battlefield with perfect aim.",
        arsenalDesc2: "From pistols to heavy machine guns, each weapon has been meticulously designed to provide tactical depth and reward skilled players.",
        weapons: "Weapons",
        ctaTitle: "Ready To Join The Fight?",
        ctaDesc: "Download VALORANT and start your competitive journey today",
        getStarted: "Get Started",
        footerDesc: "A 5v5 character-based tactical FPS where precise gunplay meets unique agent abilities.",
        game: "Game",
        esports: "Esports",
        support: "Support",
        patchNotes: "Patch Notes",
        vct: "VCT",
        champions: "Champions",
        masters: "Masters",
        gameChangers: "Game Changers",
        helpCenter: "Help Center",
        privacyPolicy: "Privacy Policy",
        termsOfService: "Terms of Service",
        contact: "Contact",
        portuguese: "Portuguese",
        english: "English",
        spanish: "Spanish",
        pageTitle: "VALORANT - Tactical FPS"
    },
    es: {
        home: "Inicio",
        agents: "Agentes",
        arsenal: "Arsenal",
        maps: "Mapas",
        news: "Noticias",
        playFree: "Jugar Gratis",
        valorant: "VALORANT",
        defyLimits: "DesafÃ­a los LÃ­mites",
        playNow: "Jugar Ahora",
        watchTrailer: "Ver TrÃ¡iler",
        yourAgents: "Tus Agentes",
        chooseCharacter: "Elige Tu Personaje",
        agentDescription: "Combina tu estilo y experiencia en un escenario competitivo global. Tienes 13 rondas para atacar y defender tu lado usando un juego de armas agudo y habilidades tÃ¡cticas.",
        duelists: "Duelistas",
        duelistsDesc: "Fraggers autosuficientes de los que su equipo espera, a travÃ©s de habilidades y destrezas, que consigan muchas eliminaciones y busquen enfrentamientos primero.",
        controllers: "Controladores",
        controllersDesc: "Expertos en dividir territorios peligrosos para preparar a su equipo para el Ã©xito con control de visiÃ³n y denegaciÃ³n de Ã¡rea.",
        initiators: "Iniciadores",
        initiatorsDesc: "DesafÃ­a Ã¡ngulos preparando a tu equipo para entrar en terreno disputado y alejar a los defensores de posiciones clave.",
        sentinels: "Centinelas",
        sentinelsDesc: "Especialistas defensivos que pueden bloquear Ã¡reas y vigilar flancos, tanto en rondas de atacante como de defensor.",
        arsenalTitle: "PrecisiÃ³n TÃ¡ctica Encuentra Fuerza Letal",
        arsenalDesc1: "Cada arma en VALORANT requiere su propia estrategia y estilo de juego. Domina los patrones de retroceso, comprende la economÃ­a y domina el campo de batalla con punterÃ­a perfecta.",
        arsenalDesc2: "Desde pistolas hasta ametralladoras pesadas, cada arma ha sido meticulosamente diseÃ±ada para proporcionar profundidad tÃ¡ctica y recompensar a los jugadores habilidosos.",
        weapons: "Armas",
        ctaTitle: "Â¿Listo para Unirte a la Lucha?",
        ctaDesc: "Descarga VALORANT y comienza tu viaje competitivo hoy",
        getStarted: "Empezar",
        footerDesc: "Un FPS tÃ¡ctico basado en personajes 5v5 donde el juego de armas preciso se encuentra con habilidades de agente Ãºnicas.",
        game: "Juego",
        esports: "Esports",
        support: "Soporte",
        patchNotes: "Notas de Parche",
        vct: "VCT",
        champions: "Campeones",
        masters: "Masters",
        gameChangers: "Game Changers",
        helpCenter: "Centro de Ayuda",
        privacyPolicy: "PolÃ­tica de Privacidad",
        termsOfService: "TÃ©rminos de Servicio",
        contact: "Contacto",
        portuguese: "PortuguÃ©s",
        english: "InglÃ©s",
        spanish: "EspaÃ±ol",
        pageTitle: "VALORANT - FPS TÃ¡ctico"
    }
};

// Sistema de traduÃ§Ã£o
class Translator {
    constructor() {
        this.currentLang = 'pt';
        this.init();
    }
    
    // Inicializa o sistema de traduÃ§Ã£o
    init() {
        // Tenta carregar o idioma salvo ou detectar o idioma do navegador
        this.loadSavedLanguage();
        
        // Configura o seletor de idioma
        this.setupLanguageSelector();
        
        // Aplica as traduÃ§Ãµes
        this.applyTranslations();
        
        // Atualiza o atributo lang do HTML
        document.documentElement.lang = this.currentLang;
    }
    
    // Carrega o idioma salvo no localStorage ou detecta o idioma do navegador
    loadSavedLanguage() {
        const savedLang = localStorage.getItem('valorant_language');
        
        if (savedLang && translations[savedLang]) {
            this.currentLang = savedLang;
        } else {
            // Detectar idioma do navegador
            const browserLang = navigator.language.substring(0, 2);
            if (translations[browserLang]) {
                this.currentLang = browserLang;
            }
        }
    }
    
    // Configura o seletor de idioma
    setupLanguageSelector() {
        const languageSelect = document.getElementById('languageSelect');
        
        if (languageSelect) {
            // Define o valor atual
            languageSelect.value = this.currentLang;
            
            // Adiciona o event listener
            languageSelect.addEventListener('change', (e) => {
                this.changeLanguage(e.target.value);
            });
        } else {
            // Se nÃ£o houver seletor, cria um dinamicamente
            this.createLanguageSelector();
        }
    }
    
    // Cria um seletor de idioma dinamicamente
    createLanguageSelector() {
        const nav = document.querySelector('nav');
        if (!nav) return;
        
        const languageSelector = document.createElement('div');
        languageSelector.className = 'language-selector';
        languageSelector.innerHTML = `
            <select id="languageSelect" class="language-select">
                <option value="pt">ðŸ‡§ðŸ‡· PT</option>
                <option value="en">ðŸ‡ºðŸ‡¸ EN</option>
                <option value="es">ðŸ‡ªðŸ‡¸ ES</option>
            </select>
        `;
        
        // Insere antes do botÃ£o CTA
        const ctaButton = nav.querySelector('.nav-cta');
        if (ctaButton) {
            nav.insertBefore(languageSelector, ctaButton);
        } else {
            nav.appendChild(languageSelector);
        }
        
        // Configura o event listener
        const select = languageSelector.querySelector('select');
        select.value = this.currentLang;
        select.addEventListener('change', (e) => {
            this.changeLanguage(e.target.value);
        });
    }
    
    // Muda o idioma
    changeLanguage(lang) {
        if (!translations[lang]) {
            console.error(`Idioma "${lang}" nÃ£o suportado.`);
            return;
        }
        
        // Atualiza o idioma atual
        this.currentLang = lang;
        
        // Salva no localStorage
        localStorage.setItem('valorant_language', lang);
        
        // Atualiza o atributo lang do HTML
        document.documentElement.lang = lang;
        
        // Aplica as traduÃ§Ãµes
        this.applyTranslations();
        
        // Atualiza o seletor
        this.updateLanguageSelector();
        
        // Dispara um evento customizado
        this.dispatchLanguageChangeEvent();
    }
    
    // Aplica as traduÃ§Ãµes a todos os elementos com data-i18n-key
    applyTranslations() {
        // Traduz elementos comuns
        const elements = document.querySelectorAll('[data-i18n-key]');
        elements.forEach(element => {
            const key = element.getAttribute('data-i18n-key');
            this.translateElement(element, key);
        });
        
        // Atualiza o tÃ­tulo da pÃ¡gina
        this.updatePageTitle();
    }
    
    // Traduz um elemento especÃ­fico
    translateElement(element, key) {
        if (!translations[this.currentLang][key]) {
            console.warn(`Chave de traduÃ§Ã£o nÃ£o encontrada: "${key}"`);
            return;
        }
        
        const translation = translations[this.currentLang][key];
        
        // Verifica o tipo de elemento
        if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA' || element.tagName === 'SELECT') {
            // Para inputs, textareas e selects
            if (element.hasAttribute('placeholder')) {
                element.setAttribute('placeholder', translation);
            } else {
                element.value = translation;
            }
        } else if (element.hasAttribute('title')) {
            // Para elementos com atributo title
            element.setAttribute('title', translation);
        } else if (element.hasAttribute('alt')) {
            // Para elementos com atributo alt (imagens)
            element.setAttribute('alt', translation);
        } else {
            // Para elementos de texto normais
            element.textContent = translation;
        }
    }
    
    // Atualiza o tÃ­tulo da pÃ¡gina
    updatePageTitle() {
        const titleKey = 'pageTitle';
        if (translations[this.currentLang][titleKey]) {
            document.title = translations[this.currentLang][titleKey];
        }
    }
    
    // Atualiza o seletor de idioma
    updateLanguageSelector() {
        const languageSelect = document.getElementById('languageSelect');
        if (languageSelect) {
            languageSelect.value = this.currentLang;
        }
    }
    
    // Dispara um evento quando o idioma Ã© alterado
    dispatchLanguageChangeEvent() {
        const event = new CustomEvent('languageChanged', {
            detail: { language: this.currentLang }
        });
        document.dispatchEvent(event);
    }
    
    // MÃ©todo para obter uma traduÃ§Ã£o especÃ­fica (Ãºtil para JavaScript dinÃ¢mico)
    translate(key) {
        return translations[this.currentLang][key] || key;
    }
    
    // Retorna o idioma atual
    getCurrentLanguage() {
        return this.currentLang;
    }
}

// Inicializa o tradutor quando o DOM estiver carregado
document.addEventListener('DOMContentLoaded', () => {
    // Cria uma instÃ¢ncia global do tradutor
    window.translator = new Translator();
    
    // Adiciona um event listener para o evento de mudanÃ§a de idioma
    document.addEventListener('languageChanged', (e) => {
        console.log(`Idioma alterado para: ${e.detail.language}`);
        
        // Aqui vocÃª pode adicionar outras aÃ§Ãµes que devem ocorrer quando o idioma muda
        // Por exemplo, recarregar dados especÃ­ficos do idioma
    });
});

// FunÃ§Ã£o auxiliar para traduzir strings dinamicamente
function t(key) {
    if (window.translator) {
        return window.translator.translate(key);
    }
    return key;
}

// FunÃ§Ã£o para mudar o idioma globalmente
function changeLanguage(lang) {
    if (window.translator) {
        window.translator.changeLanguage(lang);
    }
}

// Exporta as funÃ§Ãµes para uso global (se necessÃ¡rio)
if (typeof module !== 'undefined' && module.exports) {
    module.exports = { Translator, t, changeLanguage };
}